(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{19:function(t,i,e){"use strict";e.r(i),e.d(i,"Parallaxable",(function(){return h}));var n=e(1),a=e(4);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,i){return(r=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function l(t){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=_(t);if(i){var a=_(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return c(this,e)}}function c(t,i){return!i||"object"!==s(i)&&"function"!=typeof i?u(t):i}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&r(t,i)}(c,t);var i,e,n,s=l(c);function c(t,i){var e;return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,t,i)).isAnimating_=!1,e.lastKnownPosition_=null,e.visibilityId_="parallaxable-visibility",e.parentElement_=null,e.parallaxableRateCssPropertyName_="--parallax-rate",e.parallaxableNativeRateCssPropertyName_="--parallax-native-rate",e.parallaxableHideCssClass_="parallaxable--hide",e.fallbackExecuted_=!1,e.breakpointSizes_=["small","medium","large","extra-large"],e.observerConfiguration_={rootMargin:"100% 100% 100% 100%",threshold:[0,.5,1]},e.handleVisibilityCallback_=e.handleVisibilityCallback_.bind(u(e)),e.handleVisibility_=e.handleVisibility_.bind(u(e)),e.handleInvisibility_=e.handleInvisibility_.bind(u(e)),e.getConfigByBreakpoint_=e.getConfigByBreakpoint_.bind(u(e)),e.updateParallaxPosition_=e.updateParallaxPosition_.bind(u(e)),e.setParallaxRateCssProperty_=e.setParallaxRateCssProperty_.bind(u(e)),e}return i=c,(e=[{key:"initialize_",value:function(){var t=(this.store_.state||0).currentScrollPosition,i=this.config_.parent?this.config_.parent:"section";this.parentElement_=this.element.closest(i),this.usePlainRate_=this.config_.usePlainRate||!1,this.isWillChangeOff_=this.config_.isWillChangeOff||!1,this.getConfigByBreakpoint_({}),this.updateParallaxPosition_(t),this.store_.dispatch(this.topics_.TRACK_VISIBILITY,{id:this.visibilityId_,data:{isTrack:!0,config:this.observerConfiguration_,elementsToTrack:[this.element]}}),this.subscriptions_=[[this.topics_.VISIBILITY_TRIGGERED,this.handleVisibilityCallback_],[this.topics_.BREAKPOINT_CHANGE,this.getConfigByBreakpoint_]]}},{key:"getConfigByBreakpoint_",value:function(t){var i=this,e=t.currentBreakpoint,n=void 0===e?this.store_.state.currentBreakpoint:e;if(!this.fallbackExecuted_){this.fallbackExecuted_=!0;var s=this.config_.rate,o=void 0===s?.1:s,r={rate:o};this.configByBreakpoint_=this.breakpointSizes_.reduce((function(t,e){if(i.config_&&i.config_[e]&&(r=i.config_[e]),r.rate<-1||r.rate>1)throw new a.j(o,e);return t[e]=r,t}),{})}this.config_=this.configByBreakpoint_[n],this.lastKnownPosition_=null,this.config_.isStatic&&this.reset_()}},{key:"updateParallaxPosition_",value:function(t){this.config_.isStatic?this.handleInvisibility_():this.setParallaxRateCssProperty_(t)}},{key:"setParallaxRateCssProperty_",value:function(t){this.lastKnownPosition_=this.getLastKnownPosition_(),this.element.style.setProperty(this.parallaxableRateCssPropertyName_,this.getParallaxRate_(t))}},{key:"getLastKnownPosition_",value:function(){return null===this.lastKnownPosition_?this.getCurrentPosition_():this.lastKnownPosition_}},{key:"getCurrentPosition_",value:function(){return Math.round(this.global_.pageYOffset+this.parentElement_.getBoundingClientRect().top)}},{key:"getParallaxRate_",value:function(t){var i=this.config_.rate,e=(t-this.lastKnownPosition_)*i;return this.usePlainRate_?e.toFixed(1):"".concat(e.toFixed(1),"px")}},{key:"handleVisibility_",value:function(){this.isAnimating_||(!this.isWillChangeOff_&&this.element.style.setProperty("will-change","transform"),this.element.classList.remove(this.parallaxableHideCssClass_),this.updateParallaxPosition_(this.lastKnownPosition_),this.isAnimating_=!0),this.store_.subscribe([[this.topics_.SCROLL_POSITION_CHANGE,this.updateParallaxPosition_]])}},{key:"reset_",value:function(){this.element.style.removeProperty("will-change"),this.element.style.removeProperty("transform"),this.isAnimating_=!1}},{key:"handleInvisibility_",value:function(){this.element.style.removeProperty("will-change"),this.element.classList.add(this.parallaxableHideCssClass_),this.store_.unsubscribe(this.topics_.SCROLL_POSITION_CHANGE,this.updateParallaxPosition_),this.isAnimating_=!1}},{key:"handleVisibilityCallback_",value:function(t,i){var e=this,n=i.entries;t===this.visibilityId_&&n.forEach((function(t){if(t.target===e.element)if(t.isIntersecting&&!e.isAnimating_){var i=e.store_.state.currentScrollPosition;e.lastKnownPosition_=e.getLastKnownPosition_(i),e.handleVisibility_()}else t.isIntersecting||e.handleInvisibility_()}))}}])&&o(i.prototype,e),n&&o(i,n),c}(n.BaseComponent)}}]);